import{useState as e,useRef as n,useCallback as a,useEffect as o,createElement as t,useReducer as l,useMemo as i}from"react";var r,c={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/r=c,function(){var e={}.hasOwnProperty;function n(){for(var a=[],o=0;o<arguments.length;o++){var t=arguments[o];if(t){var l=typeof t;if("string"===l||"number"===l)a.push(t);else if(Array.isArray(t)){if(t.length){var i=n.apply(null,t);i&&a.push(i)}}else if("object"===l){if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]")){a.push(t.toString());continue}for(var r in t)e.call(t,r)&&t[r]&&a.push(r)}}}return a.join(" ")}r.exports?(n.default=n,r.exports=n):window.classNames=n}();var d=c.exports;function s(l){var i;const{animateContent:r,changeFocus:c,showHeaderIcon:s,toggleCollapsed:u,onToggleCompletion:p,loadContent:g}=l,[v,h]=e(l.collapsed),m=n(v),w=n(!1),C=n(null),b=n(null),f=n(null),x=n("always"===g);x.current||(x.current=!v);const y=a((()=>{b.current&&C.current&&w.current&&(v?(C.current.classList.remove("widget-accordion-group-expanding"),b.current.style.height="",h(!1)):(C.current.classList.add("widget-accordion-group-collapsed"),C.current.classList.remove("widget-accordion-group-collapsing"),h(!0)),w.current=!1)}),[v]);o((()=>{l.collapsed!==v&&C.current&&b.current&&f.current&&r?(w.current=!0,l.collapsed?(b.current.style.height="".concat(f.current.getBoundingClientRect().height,"px"),C.current.classList.add("widget-accordion-group-collapsing"),setTimeout((()=>{b.current&&(b.current.style.height="")}),50)):(C.current.classList.add("widget-accordion-group-expanding"),C.current.classList.remove("widget-accordion-group-collapsed"),setTimeout((()=>{b.current&&f.current&&(b.current.style.height="".concat(f.current.getBoundingClientRect().height,"px"))}),50))):l.collapsed===v||r&&l.visible||h(l.collapsed)}),[l.collapsed,l.visible,v,r]),o((()=>{v!==m.current&&(m.current=v,null==p||p(l.collapsed))}),[l.collapsed,p,v]);const I=a((e=>{switch(e.key){case"Enter":case" ":e.preventDefault(),null==u||u();break;case"Home":e.preventDefault(),null==c||c(e.currentTarget,"first");break;case"End":e.preventDefault(),null==c||c(e.currentTarget,"last");break;case"Up":case"ArrowUp":e.preventDefault(),null==c||c(e.currentTarget,"previous");break;case"Down":case"ArrowDown":e.preventDefault(),null==c||c(e.currentTarget,"next")}}),[u,c]);return l.visible?t("section",{ref:C,className:d("widget-accordion-group",{"widget-accordion-group-collapsed":v},l.dynamicClassName)},t("header",{className:"widget-accordion-group-header"},t("div",{id:"".concat(l.id,"HeaderButton"),className:d("widget-accordion-group-header-button",{"widget-accordion-group-header-button-clickable":l.collapsible,"widget-accordion-group-header-button-icon-left":l.collapsible&&"left"===s,"widget-accordion-group-header-button-icon-right":l.collapsible&&"right"===s}),tabIndex:l.collapsible?0:void 0,"data-focusindex":0,role:"button",onClick:l.collapsible?u:void 0,onKeyDown:l.collapsible?I:void 0,"aria-expanded":!v,"aria-disabled":!l.collapsible,"aria-controls":"".concat(l.id,"ContentWrapper")},l.header,!l.collapsible||"left"!==s&&"right"!==s?null:null===(i=l.generateHeaderIcon)||void 0===i?void 0:i.call(l,null!=v&&v))),t("div",{ref:b,id:"".concat(l.id,"ContentWrapper"),className:"widget-accordion-group-content-wrapper","data-focusindex":0,onTransitionEnd:y,role:"region","aria-labelledby":"".concat(l.id,"HeaderButton")},t("div",{ref:f,className:"widget-accordion-group-content"},x.current&&l.content))):null}function u(e){const a=n((o=e.singleExpandedGroup?"single":"multiple",(e,n)=>{if("expand"===n.type&&"single"===o)return e.map(((e,a)=>a!==n.index));const a=[...e];return a[n.index]="collapse"===n.type,a}));var o;const[r,c]=l(a.current,void 0,(()=>{const n=e.groups.map((n=>!e.previewMode&&e.collapsible&&!!n.initiallyCollapsed));if(!e.previewMode&&e.singleExpandedGroup){const e=n.lastIndexOf(!1);if(e>-1)for(let a=0;a<e;a++)n[a]=!0}return n})),s=n(e.groups.map((e=>e.collapsed)));i((()=>{e.groups.forEach(((e,n)=>{void 0!==e.collapsed&&e.collapsed!==s.current[n]&&(s.current[n]=e.collapsed,c({type:e.collapsed?"collapse":"expand",index:n}))}))}),[e.groups]);const u=n(null),g=e.groups.map(((n,a)=>t(p,{key:a,index:a,parent:u,id:"".concat(e.id,"AccordionGroup").concat(a),collapsible:e.collapsible,accordionGroupCollapsedStateDispatch:c,...n,collapsed:r[a],animateContent:e.animateContent,generateHeaderIcon:e.generateHeaderIcon,showHeaderIcon:e.showGroupHeaderIcon})));return t("div",{ref:u,id:e.id,className:d("widget-accordion",{"widget-accordion-preview":e.previewMode},e.class),style:e.style,"data-focusindex":e.tabIndex||0},g)}function p(e){const{accordionGroupCollapsedStateDispatch:n}=e,o=a((()=>{e.collapsed?n({type:"expand",index:e.index}):n({type:"collapse",index:e.index})}),[e.collapsed,n,e.index]),l=a(((n,a)=>{var o;if(e.parent.current&&n&&n instanceof Node){const t=Array.from(e.parent.current.querySelectorAll(":scope > .widget-accordion-group > .widget-accordion-group-header > .widget-accordion-group-header-button"));if(0===t.length)return;switch(a){case"first":t[0].focus();break;case"last":t[t.length-1].focus();break;case"previous":case"next":const e=t.findIndex((e=>e.isSameNode(n)));null===(o=t[e+("next"===a?1:-1)])||void 0===o||o.focus()}}}),[e.parent]);return t(s,{key:e.index,id:e.id,header:e.header,content:e.content,collapsed:e.collapsed,visible:e.visible,dynamicClassName:e.dynamicClassName,collapsible:e.collapsible,toggleCollapsed:o,onToggleCompletion:e.onToggleCompletion,changeFocus:l,animateContent:e.animateContent,generateHeaderIcon:e.generateHeaderIcon,showHeaderIcon:e.showHeaderIcon,loadContent:e.loadContent})}function g(e){let n="h1";switch(e.heading){case"headingTwo":n="h2";break;case"headingThree":n="h3";break;case"headingFour":n="h4";break;case"headingFive":n="h5";break;case"headingSix":n="h6"}return t(n,null,e.children)}const v=e=>{let{icon:n,className:a="",fallback:o}=e;return"glyph"===(null==n?void 0:n.type)?t("span",{className:d("glyphicon",a,n.iconClass),"aria-hidden":!0}):"image"===(null==n?void 0:n.type)?t("img",{className:a,src:n.iconUrl,"aria-hidden":!0,alt:""}):"icon"===(null==n?void 0:n.type)?t("span",{className:d(a,n.iconClass),"aria-hidden":!0}):o||null};function h(e){let{data:n,loading:a,animate:o}=e;return n?t(v,{icon:n,className:d("widget-accordion-group-header-button-icon",{"widget-accordion-group-header-button-icon-animate":o})}):a?null:t("svg",{className:d("widget-accordion-group-header-button-icon",{"widget-accordion-group-header-button-icon-animate":o}),"aria-hidden":!0,width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},t("path",{d:"M1.64598 4.64601C1.69242 4.59945 1.7476 4.5625 1.80834 4.5373C1.86909 4.51209 1.93421 4.49911 1.99998 4.49911C2.06575 4.49911 2.13087 4.51209 2.19161 4.5373C2.25236 4.5625 2.30753 4.59945 2.35398 4.64601L7.99998 10.293L13.646 4.64601C13.6925 4.59952 13.7477 4.56264 13.8084 4.53749C13.8691 4.51233 13.9342 4.49938 14 4.49938C14.0657 4.49938 14.1308 4.51233 14.1916 4.53749C14.2523 4.56264 14.3075 4.59952 14.354 4.64601C14.4005 4.6925 14.4373 4.74769 14.4625 4.80842C14.4877 4.86916 14.5006 4.93426 14.5006 5.00001C14.5006 5.06575 14.4877 5.13085 14.4625 5.19159C14.4373 5.25233 14.4005 5.30752 14.354 5.35401L8.35398 11.354C8.30753 11.4006 8.25236 11.4375 8.19161 11.4627C8.13087 11.4879 8.06575 11.5009 7.99998 11.5009C7.93421 11.5009 7.86909 11.4879 7.80834 11.4627C7.7476 11.4375 7.69242 11.4006 7.64598 11.354L1.64598 5.35401C1.59942 5.30756 1.56247 5.25239 1.53727 5.19164C1.51206 5.1309 1.49908 5.06578 1.49908 5.00001C1.49908 4.93424 1.51206 4.86912 1.53727 4.80837C1.56247 4.74763 1.59942 4.69245 1.64598 4.64601V4.64601Z"}))}function m(e){var o,l,r,c,d,s;const p=n(function(){const e="com.mendix.widgets.web.UUID";return window[e]||(window[e]=1),window[e]++}()),v=i((()=>function(e){if(function(e){return e.some((e=>void 0===e.visible.value||void 0===e.headerText.value||void 0===e.initiallyCollapsed.value||e.collapsed&&void 0===e.collapsed.value))}(e))return;return e.map((e=>{var n,a,o;let l=e.headerContent;return"text"===e.headerRenderMode&&(l=t(g,{heading:e.headerHeading},e.headerText.value)),{header:l,content:e.content,collapsed:null===(n=e.collapsed)||void 0===n?void 0:n.value,initiallyCollapsed:"dynamic"===e.initialCollapsedState?e.initiallyCollapsed.value:"collapsed"===e.initialCollapsedState,visible:e.visible.value,dynamicClassName:null===(a=e.dynamicClass)||void 0===a?void 0:a.value,onToggleCompletion:null===(o=e.collapsed)||void 0===o?void 0:o.setValue,loadContent:e.loadContent}}))}(e.groups)),[e.groups]),m=(w=e.animateIcon,C={data:null===(o=e.icon)||void 0===o?void 0:o.value,loading:"loading"===(null===(l=e.icon)||void 0===l?void 0:l.status)},b={data:null===(r=e.expandIcon)||void 0===r?void 0:r.value,loading:"loading"===(null===(c=e.expandIcon)||void 0===c?void 0:c.status)},f={data:null===(d=e.collapseIcon)||void 0===d?void 0:d.value,loading:"loading"===(null===(s=e.collapseIcon)||void 0===s?void 0:s.status)},a((e=>t(h,w?{...C,animate:w}:e?{...b,animate:w}:{...f,animate:w})),[w,C,b,f]));var w,C,b,f;return v?t(u,{id:"Accordion".concat(p.current),class:e.class,style:e.style,tabIndex:e.tabIndex,groups:v,collapsible:e.collapsible,animateContent:e.animate,singleExpandedGroup:e.collapsible?"singleExpanded"===e.expandBehavior:void 0,generateHeaderIcon:m,showGroupHeaderIcon:e.showIcon}):null}v.displayName="IconInternal";export{m as Accordion};
